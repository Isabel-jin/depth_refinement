# gradients 
- 目录内为梯度下降算法相关代码和结果
### 1. 文件组成
- forwarding.py 为各前向传播函数
- BP.py 为各反向传播函数
- 运行 main.py 进行梯度下降
### 2. 调试注意事项
- 更改三个文件的 sampler 可以更改降采样频率
  - 必须同时更改且必须为奇数
  - sampler 较小时会有内存超限报错且耗时较长
- 打开 main.py 中相关注释可以实现
  - 可视化三维点云
  - 单独储存各个方向的法向量图
  - 输出各个点 E12 E345 E6 的和，反映各项E的变化
- 可以通过更改 step 数组改变每次迭代步长
### 3. results 目录
- I.jpg 为原始灰度图，mask.jpg 为排除边缘点演示图
- B 目录存储各次迭代重构灰度图
- normal 目录存储各次迭代重构法向量图
- res 目录存储各次迭代 I 和 B 之间的残差图
### 4. 存在问题
- 耗时过长，具体体现在梯度矩阵相乘环节
  - 可以考虑稀疏性
- albedo 统一当成 1, 可以考虑加入albedo
- 梯度下降应当用减号却用加号才有下降效果
  - 需要对梯度进行检验 